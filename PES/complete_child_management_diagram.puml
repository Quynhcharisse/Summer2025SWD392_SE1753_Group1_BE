@startuml
!theme plain
skinparam backgroundColor white
skinparam activityBackgroundColor white
skinparam activityBorderColor black
skinparam activityFontColor black
skinparam swimlaneTitleFontSize 12
skinparam swimlaneTitleFontStyle bold

title Activity Diagram - Parent Child Management & Admission Form Submission

|#lightblue|Parent|
start
:Login and navigate to forms;

if (Child exists?) then (no)
  :Add child information;
  |#lightgray|System|
  :Validate and save child;
  :Send child added email;
  note right
    Email: "[PES] Child Added Successfully"
    Content: Child details and next steps
  end note
  |#lightblue|Parent|
  :Receive email confirmation;
else (yes)
  if (Need to update child info?) then (yes)
    :Select child to update;
    :Modify child information;
    |#lightgray|System|
    :Validate update permissions;
    note right
      Check:
      - Update count < 5
      - Not official student
      - No submitted forms
    end note
    
    if (Update allowed?) then (no)
      :Return restriction message;
      |#lightblue|Parent|
      :View restriction notice;
    else (yes)
      :Update child information;
      :Increment update count;
      :Send update confirmation email;
      note right
        Email: "[PES] Child Information Updated"
        Content: Update confirmation + remaining updates
      end note
      |#lightblue|Parent|
      :Receive email confirmation;
    endif
  endif
endif

:Select child and fill form;
:Upload documents;
:Submit form;

|#lightgray|System|
:Authenticate parent;
:Validate form and documents;

if (Valid?) then (no)
  |#lightblue|Parent|
  :View errors and retry;
else (yes)
  :Calculate grade and find term;
  :Create form (PENDING_APPROVAL);
  :Send form submitted email;
  note right
    Email: "[PES] Admission Form Submitted"
    Content: Submission confirmation
  end note
  
  |#lightblue|Parent|
  :Receive email notification;
  :Wait for review;
endif

stop

@enduml 